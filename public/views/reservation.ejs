<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Project</title>

    <!-- LINK TO BOOTSTRAP  AND STYLESHEET -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"> 
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
    <link href="/css/style.css" rel="stylesheet">

    <!-- NAVBAR -->
    <%- include('partials/navbar') %>
    
</head>
<body>
<!-- RESERVATION FORM 2005-->
<section class="reservations" id="reservations">
    <br><br><br>
    <div class="title">
      <h1 class="text-center">My Reservation</h1>
      <br>
      <div class="grid-container-about">
        <a>Fill in the information regarding your reservation in the form below. Then click on 'Save this reservation' and proceed to choose your menu items to order.</a>
        <br>
    </div>
    <br>
      <div class="reservations-container">
          <form id="resaForm">
          <div class="row g-3">
            <div class="row mb-3">
              <label for="inputUsername" class="col-sm-2 col-form-label">Username</label>
              <div class="col-md-4">
                <span id="inputUsername" class="form-control display-field"></span>
              </div>
              <label for="inputEmail" class="col-sm-2 col-form-label">Email</label>
              <div class="col-md-4">
                <span id="inputEmail" class="form-control display-field"></span>
              </div>
            </div>
            <div class="row mb-3">
              <label for="inputFirstname" class="col-sm-2 col-form-label">First Name</label>
              <div class="col-md-4">
                <span id="inputFirstname" class="form-control display-field"></span>
              </div>
              <label for="inputLastname" class="col-sm-2 col-form-label">Last Name</label>
              <div class="col-md-4">
                <span id="inputLastname" class="form-control display-field"></span>
              </div>
            </div>
            <div class="row mb-3">
              <label for="inputPersons" class="col-sm-2 col-form-label">No. of persons</label>
              <div class="col-md-4">
                <select id="inputPersons" class="form-select" data-field="pax">
                  <option selected>1</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>5</option>
                  <option>6</option>
                  <option>7</option>
                  <option>8</option>
                  <option>9</option>
                </select>
              </div>
              <label for="inputPhoneno" class="col-sm-2 col-form-label">Phone Number</label>
              <div class="col-md-4">
                <span id="inputPhoneno" class="form-control"></span>
              </div>            
            </div>
            <div class="row mb-3">
              <label for="inputDate" class="col-sm-2 col-form-label">Date</label>
              <div class="col-md-4">
                <input type="Date" class="form-control" id="inputDate" data-field="date">
              </div>
              <label for="inputTime" class="col-sm-2 col-form-label">Time</label>
              <div class="col-md-4">
                <input type="Time" class="form-control" id="inputTime" value="11:00" data-field="time">
              </div>
            </div>
            <br>
            <div class="row mb-3">
              <label for="inputOther" class="col-sm-2 col-form-label">Other instructions or allergies</label>
              <div class="col-md-4">
                <textarea class="form-control" id="inputOther" rows="3"></textarea>
              </div>   
              <label for="inputTakeout" class="col-sm-2 col-form-label">Take Away</label>
              <div class="col-md-4">
                <input type="checkbox" id="inputTakeout" value="yes">
              </div>   
            </div>
            <div class="text-center">
              <button type="submit" id="saveResa" class="btn btn-primary">Save this Reservation</button>
            </div>
            <div class="text-center">
              <a class="btn btn-primary" >If you already have existing reservation(s), they will be displayed below</a>
            </div>
            <table id="resasTable" class="resas">
              <hr>
              <table id="resasTable" class="resas">
                <tbody>
                <!-- Orders will be inserted here -->
                </tbody>
              </table>
            </table>
            </div>
          </form>
      </div>
    </div>
    <br><br><br><br>
  </section>    

  <!-- footer here -->        
  <div class="footer">
    <p>L.Liu @2023</p>
  </div>
    <script src="/js/resascript.js"></script>
    <script src="/js/commonscript.js"></script>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <script>
        let id='reservation';

        // Event Listener to Save a reservation
        document.getElementById('resaForm').addEventListener('submit', function(event) {
              event.preventDefault(); 
              const usernameElement = document.getElementById('inputUsername'); 
              const fnameElement = document.getElementById('inputFirstname');
              const lnameElement = document.getElementById('inputLastname');
              const emailElement = document.getElementById('inputEmail');
              const phonenoElement = document.getElementById('inputPhoneno');
              const formData = {
                    username: usernameElement.textContent,
                    fname: fnameElement.textContent,
                    lname: lnameElement.textContent,
                    email: emailElement.textContent,
                    phoneno: phonenoElement.textContent,
                    date: document.getElementById('inputDate').value,
                    time: document.getElementById('inputTime').value,
                    takeout: document.getElementById('inputTakeout').checked,
                    pax: document.getElementById('inputPersons').value,
                    other: document.getElementById('inputOther').value,
              };
              alert('Reservation created successfully!');
              saveFormData(formData);
              window.location.href = '/starters';
        });
    </script>
</body>
</html>